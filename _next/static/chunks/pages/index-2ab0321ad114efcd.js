(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1426)}])},1426:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return pe}});var t=n(5893),a=n(9008),i=n(7948),o=n(7357),u=n(5861),l=n(7294),c=n(5113),s=n(6863),f=n(1057),d=n(517),p=n(5819),h=n(3946),m=n(5503),y=n(5617),x=function(){return(0,y.I0)()},v=y.v9,k=n(657),j=n(7645),b=n(6514),g=n(8951),Z=n(5441),C=n(1425),w=function(e){var r=e.open,n=e.handleClose;return(0,t.jsx)(k.Z,{open:r,onClose:function(){return n(null)},children:(0,t.jsxs)("form",{onSubmit:function(e){e.preventDefault();var r,t=e.target;n(null!==(r=+t.measure.value)&&void 0!==r?r:null)},children:[(0,t.jsx)(j.Z,{children:"Add Jump Marker"}),(0,t.jsxs)(b.Z,{children:[(0,t.jsx)(g.Z,{children:"Enter the measure this marker should jump to:"}),(0,t.jsx)(Z.Z,{autoFocus:!0,margin:"normal",id:"measure",label:"Measure Number",type:"Number",fullWidth:!0,required:!0})]}),(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(f.Z,{onClick:function(){return n(null)},children:"Cancel"}),(0,t.jsx)(f.Z,{type:"submit",children:"Add Marker"})]})]})})},S=n(7906),M=n(3184),R=n(3816),P=n(3252),A=n(295),D=[{key:"k",action:"Play / Pause"},{key:"j",action:"Fast forward 10 seconds"},{key:"l",action:"Rewind 10 seconds"},{key:"\u2190 (Left Arrow)",action:"Fast forward 5 seconds"},{key:"\u2192 (Right Arrow)",action:"Rewind 5 seconds"},{key:"Space",action:"Set Marker"},{key:"Shift + Space",action:"Set Jump Marker"}],T=function(e){var r=e.open,n=e.handleClose;return(0,t.jsxs)(k.Z,{open:r,onClose:n,fullWidth:!0,children:[(0,t.jsx)(j.Z,{children:"Keyboard Shortcuts"}),(0,t.jsx)(b.Z,{children:(0,t.jsxs)(S.Z,{children:[(0,t.jsx)(M.Z,{sx:{width:"100%"},children:(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(P.Z,{children:"Action"}),(0,t.jsx)(P.Z,{children:"Key"})]})}),(0,t.jsx)(A.Z,{children:D.map((function(e){var r=e.key,n=e.action;return(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(P.Z,{children:r}),(0,t.jsx)(P.Z,{children:n})]},r)}))})]})}),(0,t.jsx)(C.Z,{children:(0,t.jsx)(f.Z,{onClick:n,children:"Close"})})]})},E=n(4632),O=n(8093),F=function(e){var r=(0,l.useState)(null),n=r[0],t=r[1];return[n,(0,l.useCallback)((function(e){t(e.currentTarget)}),[t]),(0,l.useCallback)((function(r){r&&e(r),t(null)}),[e,t])]},I=n(4834);function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function J(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);o=!0);}catch(l){u=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return _(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var N=function(){var e=x(),r=v((function(e){return e.player})),n=r.playing,a=r.speed,i=r.dialogOpen,o=(0,l.useCallback)((function(r){return e(E.i9.setPlaying(r))}),[e]),u=(0,l.useCallback)((function(r){return e(E.i9.setSpeed(r))}),[e]),c=(0,l.useCallback)((function(){return e(E.i9.addMeasureMarker())}),[e]),y=(0,l.useCallback)((function(){return e(E.i9.openJumpToMeasureDialog())}),[e]),k=(0,l.useCallback)((function(){return e(E.i9.openHelpDialog())}),[e]),j=(0,l.useCallback)((function(r){return e(E.i9.handleJumpMarkerDialogClose(r))}),[e]),b=(0,l.useCallback)((function(){return e(E.i9.closeHelpDialog())}),[e]),g=(0,l.useCallback)((function(r){return e(E.i9.exportAsFile(r))}),[e]),Z=J(F(u),3),C=Z[0],S=Z[1],M=Z[2],R=J(F(g),3),P=R[0],A=R[1],D=R[2];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Z,{sx:{ml:3},children:[(0,t.jsx)(f.Z,{onClick:function(){return o(!n)},children:n?"Pause":"Play"}),(0,t.jsx)(f.Z,{onClick:S,endIcon:(0,t.jsx)(m.Z,{}),children:"Speed"}),(0,t.jsx)(d.Z,{anchorEl:C,open:!!C,onClose:function(){return M(null)},children:E.NC.map((function(e){return(0,t.jsxs)(p.Z,{sx:{minWidth:100},selected:a===e,onClick:function(){return M(e)},children:[e.toFixed(1),"x"]},e)}))}),(0,t.jsx)(f.Z,{onClick:function(){return c()},children:"Set Marker"}),(0,t.jsx)(f.Z,{onClick:function(){return y()},children:"Add Jump Marker"}),(0,t.jsx)(f.Z,{onClick:A,endIcon:(0,t.jsx)(m.Z,{}),children:"Export"}),(0,t.jsx)(d.Z,{anchorEl:P,open:!!P,onClose:function(){return D(null)},anchorOrigin:{horizontal:"left",vertical:"bottom"},children:O.UQ.map((function(e){return(0,t.jsx)(p.Z,{sx:{minWidth:110},onClick:function(){return D(e)},children:O.lx[e]},e)}))})]}),(0,t.jsx)(h.Z,{sx:{ml:2},color:"primary",onClick:function(){return k()},children:(0,t.jsx)(I.Z,{})}),(0,t.jsx)(w,{open:i===E.iR.JumpToMeasure,handleClose:j}),(0,t.jsx)(T,{open:i===E.iR.Help,handleClose:b})]})},H=l.memo(N),U=n(2882),W=function(e){return L(Math.floor(e/60))},z=function(e){return L(Math.floor(e%60))},L=function(e){return"".concat(e).padStart(2,"0")},$=function(){var e=x(),r=v(E.D$),n=(0,l.useCallback)((function(r){return e(E.i9.removeMarker(r))}),[e]);return(0,t.jsx)(o.Z,{mt:3,children:(0,t.jsx)(U.Z,{component:c.Z,variant:"outlined",sx:{maxHeight:"60vh",overflow:"scroll"},children:(0,t.jsxs)(S.Z,{sx:{minWidth:650},stickyHeader:!0,children:[(0,t.jsx)(M.Z,{sx:{width:"100%"},children:(0,t.jsxs)(R.Z,{children:[(0,t.jsx)(P.Z,{children:"Measure"}),(0,t.jsx)(P.Z,{children:"Type"}),(0,t.jsx)(P.Z,{children:"Time"}),(0,t.jsx)(P.Z,{children:"Actions"})]})}),(0,t.jsx)(A.Z,{children:r.map((function(e){var r=e.time,a=e.type,i=e.measure;return(0,t.jsx)(K,{time:r,type:a,measure:i,removeMarker:n},r)}))})]})})})},Q=function(e){var r=e.time,n=e.type,a=e.measure,i=e.removeMarker;return(0,t.jsxs)(R.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},selected:n===E.QZ.Jump,children:[(0,t.jsx)(P.Z,{component:"th",scope:"row",children:a}),(0,t.jsx)(P.Z,{component:"th",scope:"row",children:n}),(0,t.jsxs)(P.Z,{component:"th",scope:"row",children:[W(r),":",z(r)," (",r.toFixed(3),"s)"]}),(0,t.jsx)(P.Z,{component:"th",scope:"row",children:(0,t.jsx)(f.Z,{onClick:function(){return i(r)},children:"Remove"})})]},r)},K=l.memo(Q),X=l.memo($),q=n(9218),B=n(2734),G=n(4051),V=n.n(G);function Y(e,r,n,t,a,i,o){try{var u=e[i](o),l=u.value}catch(c){return void n(c)}u.done?r(l):Promise.resolve(l).then(t,a)}var ee=function(e){var r=e.waveSurferRef,t=e.waveContainerRef,a=e.timelineContainerRef,i=e.onDuration,o=e.url,u=e.colors;return(0,l.useEffect)((function(){var e=function(){var e,l=(e=V().mark((function e(){var l,c,s,f,d,p,h;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.current&&a.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,n.e(33).then(n.t.bind(n,9954,23));case 4:return l=e.sent,c=l.default,e.next=8,n.e(684).then(n.t.bind(n,4684,23));case 8:return s=e.sent,f=s.default,e.next=12,n.e(512).then(n.t.bind(n,3512,23));case 12:d=e.sent,p=d.default,(h=c.create({container:t.current,scrollParent:!0,backend:"MediaElement",cursorColor:u.textSecondary,progressColor:u.primaryDark,waveColor:u.primaryLight,plugins:[f.create({markers:[{draggable:!0}]}),p.create({container:a.current,fontFamily:"Roboto",unlabeledNotchColor:u.textSecondary,secondaryFontColor:u.textPrimary})]})).markers.clear(),h.load(o),h.on("ready",(function(){i(h.getDuration()),n.g.waveSurfer=h})),r.current=h;case 19:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function o(e){Y(i,t,a,o,u,"next",e)}function u(e){Y(i,t,a,o,u,"throw",e)}o(void 0)}))});return function(){return l.apply(this,arguments)}}();return e(),function(){r.current&&(r.current.destroy(),r.current=null)}}),[r,a,t,i,u,o])},re=function(e,r,n){(0,l.useEffect)((function(){if(e.current){var t=e.current;return t.on(r,n),function(){t&&(null===t||void 0===t||t.un(r,n))}}}),[e,e.current,r,n])},ne=function(e){var r=e.url,n=e.playing,a=e.onPlay,i=e.onPause,u=e.onEnded,c=e.onTime,s=e.onDuration,f=e.onSeek,d=e.updateMarkerTime,p=e.playbackRate,h=e.markers,m=e.waveSurferRef,y=e.colors,x=(0,l.useRef)(null),v=(0,l.useRef)(null);ee({waveSurferRef:m,waveContainerRef:x,timelineContainerRef:v,colors:y,onDuration:s,url:r}),function(e){var r=e.waveSurferRef,n=e.playing,t=(0,l.useRef)(n);(0,l.useEffect)((function(){if(r.current&&t.current!==n){try{var e,a;n?null===(e=r.current)||void 0===e||e.play():null===(a=r.current)||void 0===a||a.pause()}catch(i){console.log(i)}t.current=n}}),[r,n])}({waveSurferRef:m,playing:n}),function(e){var r=e.waveSurferRef,n=e.playbackRate;(0,l.useEffect)((function(){if(r.current)try{var e,t;null===(e=r.current)||void 0===e||null===(t=e.setPlaybackRate)||void 0===t||t.call(e,n)}catch(a){console.log(a)}}),[r,n])}({waveSurferRef:m,playbackRate:p}),function(e){var r=e.waveSurferRef,n=e.markers,t=e.colors;(0,l.useEffect)((function(){if(r.current)try{r.current.markers.clear(),n.forEach((function(e){var n,a=e.time,i=e.measure,o=e.type,u=e.id,l=o===E.QZ.Jump?t.secondaryMain:t.primaryMain,c=(null===(n=r.current)||void 0===n?void 0:n.addMarker({oldTime:a,time:a,label:i,color:l,position:"top",draggable:!0})).el;c.setAttribute("data-marker-id",u);var s=c.children[0];s.style.background=l,s.style.opacity=.5;var f=c.children[1].children[1];f.style.fontFamily="Roboto",f.style.fontSize="80%",f.style.marginTop="-4px"}))}catch(e){console.log(e)}}),[r,n,t])}({waveSurferRef:m,markers:h,colors:y});var k=(0,l.useCallback)((function(e){var r=e.el.getAttribute("data-marker-id");d({markerId:r,newMarkerTime:e.time})}),[d]);return re(m,"play",a),re(m,"pause",i),re(m,"finish",u),re(m,"audioprocess",c),re(m,"seek",f),re(m,"marker-drop",k),(0,t.jsxs)(o.Z,{mt:5,mb:5,children:[(0,t.jsx)(o.Z,{ref:x,sx:{"& wave::-webkit-scrollbar":{display:"none"},"& wave":{scrollbarWidth:"none"}}}),(0,t.jsx)(o.Z,{ref:v})]})},te=function(e){var r=e.waveSurferRef,n=x(),a=v((function(e){return e.player})),i=a.playing,o=a.speed,u=v((function(e){return e.app.file.url})),c=v(E.D$),s=(0,B.Z)(),f=(0,l.useMemo)((function(){return{primaryMain:s.palette.primary.main,primaryDark:s.palette.primary.dark,primaryLight:s.palette.primary.light,secondaryMain:s.palette.secondary.main,textPrimary:s.palette.text.primary,textSecondary:s.palette.text.secondary}}),[s]),d=(0,l.useCallback)((function(e){return n(E.i9.setPlaying(e))}),[n]),p=(0,l.useCallback)((function(e){return n(E.i9.setTime(e))}),[n]),h=(0,l.useCallback)((function(e){return n(E.i9.setProgress(e))}),[n]),m=(0,l.useCallback)((function(e){return n(E.i9.setDuration(e))}),[n]),y=(0,l.useCallback)((function(e){var r=e.markerId,t=e.newMarkerTime;return n(E.i9.updateMarkerTime({markerId:r,newMarkerTime:t}))}),[n]);return(0,t.jsx)(ne,{url:u,playing:i,onPlay:(0,l.useCallback)((function(){return d(!0)}),[d]),onPause:(0,l.useCallback)((function(){return d(!1)}),[d]),onEnded:(0,l.useCallback)((function(){return d(!1)}),[d]),onTime:(0,l.useCallback)((function(e){return p(e)}),[p]),updateMarkerTime:y,onSeek:(0,l.useCallback)((function(e){return h(e)}),[h]),onDuration:(0,l.useCallback)((function(e){return m(e)}),[m]),playbackRate:o,markers:c,waveSurferRef:r,colors:f})},ae=function(){var e=x(),r=v((function(e){return!!e.player.dialogOpen})),n=v((function(e){return e.app.file.name})),a=(0,l.useCallback)((function(){return e(E.i9.togglePlaying())}),[e]),i=(0,l.useCallback)((function(){return e(E.i9.addMeasureMarker())}),[e]),s=(0,l.useCallback)((function(){return e(E.i9.openJumpToMeasureDialog())}),[e]),f=(0,l.useRef)(null);return function(e){var r=e.dialogIsOpen,n=e.togglePlaying,t=e.addMeasureMarker,a=e.openJumpToMeasureDialog,i=e.relativeSeek;(0,q.y1)("k",(function(){r||n()}),[r,n]),(0,q.y1)("space",(function(e){r||(e.preventDefault(),t())}),[r,t]),(0,q.y1)("shift+space",(function(e){e.preventDefault(),a()}),[a]),(0,q.y1)("j",(function(){return i(-10)}),[i]),(0,q.y1)("l",(function(){return i(10)}),[i]),(0,q.y1)("left",(function(){return i(-5)}),[i]),(0,q.y1)("right",(function(){return i(5)}),[i])}({dialogIsOpen:r,togglePlaying:a,addMeasureMarker:i,openJumpToMeasureDialog:s,relativeSeek:(0,l.useCallback)((function(e){f.current&&f.current.skip(e)}),[])}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Z,{sx:{mt:2,p:2},variant:"outlined",children:[(0,t.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,t.jsx)(u.Z,{variant:"h6",children:n}),(0,t.jsx)(H,{})]}),(0,t.jsx)(te,{waveSurferRef:f})]}),(0,t.jsx)(X,{})]})},ie=n(5162);function oe(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function ue(e,r,n,t,a,i,o){try{var u=e[i](o),l=u.value}catch(c){return void n(c)}u.done?r(l):Promise.resolve(l).then(t,a)}function le(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function ce(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){le(e,r,n[r])}))}return e}function se(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);o=!0);}catch(l){u=!0,a=l}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return oe(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var fe=function(e){var r,n=e.setFile,a=(0,l.useCallback)((function(e){var r=se(e,1)[0];if(r){var t=r.name,a=r.path,i=URL.createObjectURL(r);n({name:t,path:a,url:i})}}),[n]),i=(0,ie.uI)({onDrop:a,multiple:!1,accept:"audio/*"}),s=i.getRootProps,d=i.getInputProps,p=i.isDragActive,h=i.isDragAccept,m=(0,l.useCallback)((r=V().mark((function e(){var r;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({name:"Mazurka in A minor, Op. 7 no. 2",path:r="examples/chopin-mazurka-opus-7-2.mp3",url:r});case 3:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var i=r.apply(e,n);function o(e){ue(i,t,a,o,u,"next",e)}function u(e){ue(i,t,a,o,u,"throw",e)}o(void 0)}))}),[n]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(c.Z,ce({},s(),{sx:{minHeight:100,display:"flex",justifyContent:"center",alignItems:"center",color:"text.secondary",cursor:"pointer",p:2,height:function(e){return e.spacing(25)}},variant:"outlined",children:[(0,t.jsx)("input",ce({},d())),p&&h?(0,t.jsx)(u.Z,{variant:"body1",children:"Drop the file here ..."}):(0,t.jsx)(u.Z,{variant:"body1",children:"Drag and drop an audio file here, or click to select one"})]})),(0,t.jsx)(o.Z,{mt:2,sx:{display:"flex",justifyContent:"center"},children:(0,t.jsx)(f.Z,{variant:"text",size:"small",color:"secondary",onClick:function(){return m()},children:"Use Example File"})})]})},de=n(1738),pe=function(){var e=x(),r=v((function(e){return e.app.file}));return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.default,{children:[(0,t.jsx)("title",{children:"Audiate"}),(0,t.jsx)("meta",{name:"description",content:"Annotate audio files"}),(0,t.jsx)("base",{href:"/audiate/"})]}),(0,t.jsx)(i.Z,{sx:{pt:10,height:"100vh"},children:(0,t.jsxs)(o.Z,{children:[(0,t.jsx)(u.Z,{variant:"h3",gutterBottom:!0,children:"Audiate"}),!r.hasFile&&(0,t.jsx)(fe,{setFile:function(r){return e(de.xZ.setFile(r))}}),r.hasFile&&(0,t.jsx)(ae,{})]})})]})}}},function(e){e.O(0,[4,774,888,179],(function(){return r=5301,e(e.s=r);var r}));var r=e.O();_N_E=r}]);