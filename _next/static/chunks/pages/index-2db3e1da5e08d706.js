(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(43)}])},43:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return X}});var t=r(5893),o=r(7294),i=r(9008),u=r(7948),a=r(7357),c=r(5861),s=r(2004),l=r(5113),f=function(e){return"".concat(e).padStart(2,"0")},d=function(e){return{minutes:f(Math.floor(e/60)),seconds:f(Math.floor(e%60))}},h=r(1409),p=function(e){var n=e.duration,r=e.progress,o=d(n),i=o.minutes,u=o.seconds,a=d(n*r),s=a.minutes,l=a.seconds;return(0,t.jsxs)(c.Z,{variant:"caption",sx:{alignSelf:"flex-end"},gutterBottom:!0,children:[s,":",l," / ",i,":",u]})},x=function(e){var n=e.relativePosition,r=e.audioDuration,o=d(n*r),i=o.minutes,u=o.seconds;return(0,t.jsxs)(a.Z,{sx:{left:"".concat(100*n,"%"),position:"absolute",height:"100%",top:0},children:[(0,t.jsx)(a.Z,{height:"140%",width:2,sx:{position:"absolute",top:"-20%",backgroundColor:"secondary.main"}}),(0,t.jsxs)(c.Z,{variant:"caption",sx:{position:"absolute",top:"120%",left:"-50%",textAlign:"center"},children:[i,":",u]})]})},m=function(e){var n=e.progress,r=e.audioDuration,i=e.markers,u=e.onClick,c=(0,o.useRef)(null),s=function(e){var n=(0,o.useState)(null),r=n[0],t=n[1];return(0,o.useEffect)((function(){if(e.current){var n=new ResizeObserver((0,h.Z)((function(){t(e.current.getBoundingClientRect())}),500));return n.observe(document.body),function(){n.unobserve(document.body)}}}),[e,t]),r}(c),l=(0,o.useCallback)((function(e){var n=s.x,r=s.width;u((e.clientX-n)/r)}),[u,s]);return(0,t.jsxs)(a.Z,{mt:2,pb:3,sx:{display:"flex",flexDirection:"column"},children:[(0,t.jsx)(p,{duration:r,progress:n}),(0,t.jsxs)(a.Z,{sx:{backgroundColor:"grey.200",height:40,position:"relative",borderRadius:1},onClick:l,ref:c,children:[(0,t.jsx)(a.Z,{sx:{backgroundColor:"primary.light",height:"100%",borderTopLeftRadius:function(e){return e.shape.borderRadius},borderBottomLeftRadius:function(e){return e.shape.borderRadius}},style:{width:"".concat(100*n,"%")}}),i.map((function(e,n){return(0,t.jsx)(x,{audioDuration:r,relativePosition:e},n)}))]})]})},b=r(6863),y=r(1057),j=r(4314),g=r(5819),v=r(5503),Z=[.5,1,1.5,2],k=function(e){var n=e.speed,r=e.playing,i=e.setPlaying,u=e.setSpeed,a=e.addMarker,c=(0,o.useState)(null),s=c[0],l=c[1],f=function(e){return function(){e&&u(e),l(null)}};return(0,t.jsxs)(b.Z,{sx:{ml:3},children:[(0,t.jsx)(y.Z,{onClick:function(){return i(!r)},children:r?"Pause":"Play"}),(0,t.jsx)(y.Z,{onClick:function(e){l(e.currentTarget)},endIcon:(0,t.jsx)(v.Z,{}),children:"Speed"}),(0,t.jsx)(j.Z,{anchorEl:s,open:!!s,onClose:f(null),anchorOrigin:{horizontal:20,vertical:"bottom"},children:Z.map((function(e){return(0,t.jsxs)(g.Z,{selected:n===e,onClick:f(e),children:[e.toFixed(1),"x"]},e)}))}),(0,t.jsx)(y.Z,{onClick:function(){return a()},children:"Set Marker"})]})},w=r(2882),S=r(7906),O=r(3184),C=r(3816),A=r(3252),P=r(295),D=function(e){var n=e.markers,r=e.removeMarker;return(0,t.jsx)(a.Z,{mt:3,children:(0,t.jsx)(w.Z,{component:l.Z,variant:"outlined",sx:{maxHeight:"70vh",overflow:"scroll"},children:(0,t.jsxs)(S.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,t.jsx)(O.Z,{children:(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(A.Z,{children:"Markerposition"}),(0,t.jsx)(A.Z,{children:"Actions"})]})}),(0,t.jsx)(P.Z,{children:n.map((function(e){var n=e.relativeTime,o=e.minutes,i=e.seconds;return(0,t.jsxs)(C.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,t.jsxs)(A.Z,{component:"th",scope:"row",children:[o,":",i," (",n.toFixed(3),")"]}),(0,t.jsx)(A.Z,{component:"th",scope:"row",children:(0,t.jsx)(y.Z,{onClick:function(){return r(n)},children:"Remove"})})]},n)}))})]})})})},R=r(9218);function E(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function _(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function I(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return E(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e){var n=e.file,r=(0,o.useState)(!1),i=r[0],u=r[1],f=(0,o.useState)(0),h=f[0],p=f[1],x=(0,o.useState)(0),b=x[0],y=x[1],j=(0,o.useState)([]),g=j[0],v=j[1],Z=(0,o.useState)(1),w=Z[0],S=Z[1],O=(0,o.useRef)(null),C=(0,o.useCallback)((function(){v((function(e){return e.includes(h)?e:I(e).concat([h])}))}),[h,v]),A=(0,o.useCallback)((function(e){v((function(n){return n.filter((function(n){return n!==e}))}))}),[v]),P=(0,o.useMemo)((function(){return URL.createObjectURL(n)}),[n]);return(0,R.y1)("k",(function(){return u((function(e){return!e}))}),[u]),(0,R.y1)("space",(function(e){e.preventDefault(),C()}),[C]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Z,{sx:{mt:2,p:2},variant:"outlined",children:[(0,t.jsxs)(a.Z,{sx:{display:"flex"},children:[(0,t.jsx)(c.Z,{variant:"h6",children:n.name}),(0,t.jsx)(k,{playing:i,speed:w,setPlaying:u,setSpeed:S,addMarker:C})]}),(0,t.jsx)(s.Z,{url:P,playing:i,onPlay:function(){return u(!0)},onPause:function(){return u(!1)},onEnded:function(){return u(!1)},onProgress:function(e){var n=e.played;return p(n)},onDuration:function(e){return y(e)},progressInterval:100,width:0,height:0,controls:!0,playbackRate:w,config:{file:{forceAudio:!0}},ref:O}),(0,t.jsx)(m,{progress:h,audioDuration:b,markers:g,onClick:function(e){return O.current.seekTo(e)}})]}),(0,t.jsx)(D,{removeMarker:A,markers:g.map((function(e){return function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){_(e,n,r[n])}))}return e}({relativeTime:e},d(e*b))})).reverse()})]})}var T=r(5162);function F(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function N(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function B(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){N(e,n,r[n])}))}return e}function L(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],u=!0,a=!1;try{for(r=r.call(e);!(u=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);u=!0);}catch(c){a=!0,o=c}finally{try{u||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return F(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var U=function(e){var n=e.setFile,r=(0,o.useCallback)((function(e){var r=L(e,1)[0];r&&n(r)}),[n]),i=(0,T.uI)({onDrop:r,multiple:!1,accept:"audio/*"}),u=i.getRootProps,a=i.getInputProps,s=i.isDragActive,f=i.isDragAccept;return(0,t.jsxs)(l.Z,B({},u(),{sx:{minHeight:100,display:"flex",justifyContent:"center",alignItems:"center",color:"text.secondary",cursor:"pointer",p:2,height:function(e){return e.spacing(25)}},variant:"outlined",children:[(0,t.jsx)("input",B({},a())),s&&f?(0,t.jsx)(c.Z,{variant:"body1",children:"Drop the file here ..."}):(0,t.jsx)(c.Z,{variant:"body1",children:"Drag and drop an audio file here, or click to select one"})]}))};function X(){var e=(0,o.useState)(null),n=e[0],r=e[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.default,{children:[(0,t.jsx)("title",{children:"Audiate"}),(0,t.jsx)("meta",{name:"description",content:"Annotate audio files"})]}),(0,t.jsx)(u.Z,{sx:{pt:10,height:"100vh"},children:(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(c.Z,{variant:"h3",gutterBottom:!0,children:"Audiate"}),!n&&(0,t.jsx)(U,{setFile:r}),n&&(0,t.jsx)(M,{file:n})]})})]})}}},function(e){e.O(0,[73,774,888,179],(function(){return n=8581,e(e.s=n);var n}));var n=e.O();_N_E=n}]);